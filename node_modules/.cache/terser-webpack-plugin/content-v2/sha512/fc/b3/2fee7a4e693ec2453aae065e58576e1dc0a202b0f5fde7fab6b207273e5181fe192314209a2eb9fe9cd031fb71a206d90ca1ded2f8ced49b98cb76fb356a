{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{22:function(e,s,t){},23:function(e,s,t){},24:function(e,s,t){\"use strict\";const a=[3,4];var c={props:[\"classNumTotal\",\"regNumTotal\"],data:()=>({selectedClass:0,selectedReg:0,timeup:!0,enableRegSelect:!1}),mounted(){this.$nextTick(()=>{const e=this.$router.history.current.path,s=/\\/index/.test(e)?this.$store.state.indexPageListCache:this.$store.state.compatiblePageListCache;console.log(s)})},methods:{changeReg(e){this.enableRegSelect||(this.selectedReg=e,this.$emit(\"changedReg\",e))},changeClass(e){this.selectedClass=e,this.enableRegSelect=-1!==a.indexOf(e),this.$emit(\"changedClass\",e,this.enableRegSelect)},reverse(){this.timeup=!this.timeup,this.$emit(\"reverse\")}}},i=(t(25),t(1)),l=Object(i.a)(c,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t(\"div\",{staticClass:\"selectbox\"},[t(\"div\",{staticClass:\"select\"},[t(\"div\",{staticClass:\"selecteCt\"},[t(\"div\",{staticClass:\"selecte-wrapper\"},e._l([\"全部\",\"租房\",\"售房\",\"租门市\",\"售门市\",\"求租\"],function(s,a){return t(\"div\",{key:a,staticClass:\"selecte-item\",class:{selected:e.selectedClass===a},on:{click:function(s){return e.changeClass(a)}}},[t(\"span\",{staticClass:\"span\"},[e._v(e._s(s))]),e._v(\" \"),t(\"span\",{staticClass:\"num\"},[e._v(e._s(e.classNumTotal[a]))])])}),0)]),e._v(\" \"),t(\"i\",{class:\"control iconfont \"+(e.timeup?\"icon-mayi-shengxusvg\":\"icon-mayi-jiangxusvg\"),on:{click:e.reverse}})]),e._v(\" \"),t(\"div\",{class:[\"select2\",{enable:e.enableRegSelect}]},e._l([\"全部\",\"单间\",\"一室一厅\",\"二室一厅\",\"三室一厅\",\"三室二厅\",\"其他\"],function(s,a){return t(\"span\",{key:a,staticClass:\"span\",class:{active:e.selectedReg===a},on:{click:function(s){return e.changeReg(a)}}},[e._v(\"\\n\\t\\t\\t\"+e._s(s)+\" \"+e._s(e.regNumTotal[a])+\"\\n\\t\\t\")])}),0)])},[],!1,null,\"41cc10a2\",null);s.a=l.exports},25:function(e,s,t){\"use strict\";var a=t(22);t.n(a).a},26:function(e,s,t){\"use strict\";var a=t(23);t.n(a).a},27:function(e,s,t){},32:function(e,s,t){\"use strict\";var a={props:[\"keyval\",\"hasLoad\"],data:()=>({path:\"\",houses:[],classNumTotal:[],regNumTotal:[],timeup:!0,selectedClass:0,selectedReg:0,scrollY:0,checkModel:!1,checkedAll:!1,checkedNum:0}),mounted(){this.initEvent()},methods:{initEvent(){const e=this.$refs.houseList.$el;util.longPress(e,e=>{this.checkModel=!0,window.keyBack=(()=>{this.checkModel=!1,window.keyBack=util.defaultBack})})},getData(){this.keyval?db.getDataWithKeys(this.keyval.split(\" \"),e=>{this.initHousesList(e)}):db.getAllData(e=>{this.initHousesList(e)})},initHousesList(e){const s=[],t=[\"全部\",\"租房\",\"售房\",\"租门市\",\"售门市\",\"求租\"],a=[0,0,0,0,0,0],c=[0,0,0,0,0,0,0];for(let i=0,l=e.length;i<l;i++){let l=e[i],o=l.classPass=0===this.selectedClass||this.selectedClass===l.CLASSTYPE;l.regPass=0===this.selectedReg||this.selectedReg===l.REGTYPE;l.friendlyDate=util.friendlyDate(l.TIME),l.friendlyContent=util.friendlyContent(l.CONTENT),l.typeText=t[l.CLASSTYPE],l.checked=!1,s.push(l),a[0]++,a[l.CLASSTYPE]++,c[0]++,o&&c[l.REGTYPE]++}this.timeup&&s.reverse(),this.houses=s,this.classNumTotal=a,this.regNumTotal=c},open(e,s){this.checkModel?(s.checked=!s.checked,s.checked?this.checkedNum++:this.checkedNum--):this.$router.push(\"/detailsHouse/\"+e)},changeClass(e,s){if(this.selectedClass=e,this.houses.forEach(s=>{s.classPass=e===s.CLASSTYPE||0===e}),s)this.changeReg(0),this.regNumTotal=[0,0,0,0,0,0,0];else{let e=[0,0,0,0,0,0,0];this.houses.forEach(s=>{s.classPass&&(e[0]++,e[s.REGTYPE]++)}),this.regNumTotal=e}this.checkModel&&(this.checkedAll=!1),this.saveData()},changeReg(e){this.selectedReg=e,this.houses.forEach(s=>{s.regPass=e===s.REGTYPE||0===e}),this.saveData(),this.checkModel&&(this.checkedAll=!1)},reverse(e){this.timeup=e,this.houses.reverse()},getCheckedData(e){this.houses.forEach(s=>{s.checked&&e&&e(s)})},exportCheckedData(){var e=[];this.getCheckedData(s=>{e.push({CONTENT:s.CONTENT,TIME:s.TIME,CLASSTYPE:s.CLASSTYPE})}),Android.exportData(JSON.stringify(e))},delCheckedData(){this.$promptbox({content:\"确定删除选中内容?\",cancle_true:()=>{this.getCheckedData(e=>{db.deleteDateWithID(e.ID,()=>{this.checkModel=!1})}),this.getData()}})},cancelCheckModel(){window.keyBack=util.defaultBack,this.checkModel=this.checkedAll=!1,this.checkedNum=0,this.getCheckedData(e=>{e.checked=!1})},checkAll(){var e=this.checkedAll=!this.checkedAll;this.houses.forEach(s=>{s.regPass&&s.classPass&&s.checked&&this.checkedNum--,s.regPass&&s.classPass&&(s.checked=e)&&(e?this.checkedNum++:this.checkedNum--)})},saveScroll(e){this.scrollY=e.srcElement.scrollTop,this.saveData()},saveData(){/\\/index/.test(this.path)&&this.$store.commit(\"updateIndexPageListCache\",{selectedClass:this.selectedClass,selectedReg:this.selectedReg,listViewY:this.scrollY}),/\\/compatibleHouse/.test(this.path)&&this.$store.commit(\"updateCompatiblePageListCache\",{selectedClass:this.selectedClass,selectedReg:this.selectedReg,listViewY:this.scrollY}),console.log(this.$store.state)}},watch:{hasLoad:{handler(){this.getData()},deep:!0}},components:{selectbox:t(24).a}},c=(t(26),t(1)),i=Object(c.a)(a,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t(\"div\",{staticClass:\"houseCt\"},[t(\"selectbox\",{attrs:{classNumTotal:e.classNumTotal,regNumTotal:e.regNumTotal},on:{changedReg:e.changeReg,changedClass:e.changeClass,reverse:e.reverse}}),e._v(\" \"),t(\"div\",{ref:\"houseListScroll\",staticClass:\"house-list\",on:{scroll:e.saveScroll}},[t(\"transition-group\",{ref:\"houseList\",attrs:{tag:\"div\",name:\"list-complete\"}},e._l(e.houses,function(s){return t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:s.regPass&&s.classPass,expression:\"house.regPass && house.classPass\"}],key:s.ID,staticClass:\"house-item\",on:{click:function(t){return e.open(s.ID,s)}}},[t(\"div\",{staticClass:\"content\"},[t(\"span\",[e._v(e._s(s.friendlyContent))])]),e._v(\" \"),t(\"div\",{staticClass:\"infor-wrapper\"},[t(\"div\",{staticClass:\"infor-item type\"},[t(\"i\",{staticClass:\"iconfont icon-bianji\"}),e._v(\" \"),t(\"span\",{staticClass:\"span\"},[e._v(e._s(s.typeText))])]),e._v(\" \"),t(\"div\",{staticClass:\"infor-item time\",class:{\"check-show\":e.checkModel}},[t(\"i\",{staticClass:\"iconfont icon-lishi\"}),e._v(\" \"),t(\"span\",{staticClass:\"span\"},[e._v(e._s(s.friendlyDate))])]),e._v(\" \"),t(\"input\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.checkModel,expression:\"checkModel\"}],staticClass:\"checkbox\",attrs:{type:\"checkbox\"},domProps:{checked:s.checked}})])])}),0),e._v(\" \"),e.checkModel?t(\"div\",{staticClass:\"big-padding\"}):e._e()],1),e._v(\" \"),e.checkModel?t(\"div\",{staticClass:\"check-control\"},[t(\"button\",{staticClass:\"mini-btn warn\",on:{click:e.delCheckedData}},[e._v(\"删除\")]),e._v(\" \"),t(\"button\",{staticClass:\"mini-btn primary\",on:{click:e.exportCheckedData}},[e._v(\"导出\")]),e._v(\" \"),t(\"button\",{staticClass:\"mini-btn default\",on:{click:e.cancelCheckModel}},[e._v(\"取消\")]),e._v(\" \"),t(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.checkedNum,expression:\"checkedNum\"}]},[e._v(e._s(e.checkedNum))]),e._v(\" \"),t(\"input\",{staticClass:\"checkbox\",attrs:{type:\"checkbox\"},domProps:{checked:e.checkedAll},on:{click:e.checkAll}})]):e._e()],1)},[],!1,null,null,null);s.a=i.exports},33:function(e,s,t){\"use strict\";var a=t(27);t.n(a).a},39:function(e,s,t){\"use strict\";t.r(s);var a=t(32);var c={props:[\"hasLoad\"],methods:{change(e){this.selected=e},openAddPage(){this.$router.push(\"/addform\")},openSearchPage(){this.$router.push(\"/search\")},showMoreControl(){this.$choicebox({title:\"选择你的操作\",list:[\"导入数据\",\"导出数据\",\"清空数据\"],method:e=>{switch(e){case 0:(e=>{e.$choicebox({title:\"选择导入方式\",list:[\"从剪贴板中读取\",\"从接收到的备份文件\"],method:s=>{const t=0===s?Android.getClipboardText():Android.importData(),a=`从${0===s?\"剪贴板\":\"微信文件\"}检测到数据, 确认导入? 这可能造成数据混乱。`,c=0===s?\"未在剪贴板中找到数据\":\"未找到备份文件\";\"{\"===t[0]||\"[\"===t[0]?e.$promptbox({content:a,cancle_true:()=>{db.insterDataByJson(JSON.parse(t),(s,t,a)=>{e.$notify({title:`导入完成, 成功${s}, 失败${t}, 重复${a}`}),e.$emit(\"needLoad\")})}}):e.$notify({title:c})}})})(this);break;case 1:db.getAllData(e=>{Android.exportData(JSON.stringify(e))});break;case 2:this.$promptbox({content:\"确认清空? 这将删除所有数据\",cancle_true:()=>{db.deleteAllDate(()=>{this.$notify({title:\"清空完成\"}),this.$emit(\"needLoad\")})}})}}})}},components:{houselist:a.a}},i=(t(33),t(1)),l=Object(i.a)(c,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t(\"div\",{staticClass:\"page\"},[t(\"div\",{staticClass:\"top-bar\"},[t(\"div\",{staticClass:\"search-wrapper\"},[t(\"div\",{staticClass:\"search-btn\",on:{click:e.openSearchPage}},[t(\"span\",[e._v(\"搜索房源..\")]),e._v(\" \"),t(\"i\",{staticClass:\"iconfont icon-chazhao\"})]),e._v(\" \"),t(\"div\",{staticClass:\"icon-btn-wrapper\"},[t(\"i\",{staticClass:\"iconfont icon-icon_roundadd\",on:{click:e.openAddPage}}),e._v(\" \"),t(\"i\",{staticClass:\"iconfont icon-shezhi\",on:{click:e.showMoreControl}})])])]),e._v(\" \"),t(\"div\",{staticClass:\"house-wrapper\"},[t(\"houselist\",{attrs:{hasLoad:e.hasLoad}})],1)])},[],!1,null,\"65e895de\",null);s.default=l.exports}}]);","extractedComments":[]}